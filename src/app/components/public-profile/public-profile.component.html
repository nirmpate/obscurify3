

<div class="slate">
  <header>
    <a class="back__btn" routerLink="/home"> <i class="fas fa-arrow-left"></i> Go back </a>

  </header>

  <main>

    <div class="mb-4" fxLayout="column" fxLayout.gt-md="row" fxLayoutGap="2em" fxFlexAlign="center">

      <div class="profile__image">
        <img [src]="imageURL" alt="Profile Picture">
      </div>

      <div class="profile__header">
        <h1 class="mb-1">{{displayName}}'s Obscurify</h1>
        <p>
          Check out their stats below
        </p>
      </div>
    </div>

    <div class="mb-4 profile__obscure__block">
      <h1 class="profile__obscure__block__header">Obscurify Score</h1>
      <div fxLayout="column" fxLayout.gt-md="row" fxLayoutGap="2rem" fxLayoutGap.gt-md="4rem" fxLayoutAlign="start center">
        <h1 class="obscure__score">
          {{obscurifyPercentile | number:'1.0-0' }}%
        </h1>

        <p>
          Theyâ€™re more obscure than {{obscurifyPercentile | number:'1.0-0' }}% of {{country}} listeners.
        </p>
      </div>
    </div>

    <div class="mb-4 top__genres">
      <h1 class="mb-1">Top Genres</h1>
        <div fxLayout="row wrap" >
          <div class="genre__chip" *ngFor="let genre of genres">
            {{ genre[0] }}
          </div>
        </div>
    </div>

    <div class="dark-theme tracks__artists">
      <h1 class="mb-1">Listening History</h1>

      <mat-tab-group mat-align-tabs="start" color="mat-light-theme">
        <mat-tab class="mb-1" label="All Time" >
            <div class="mb-1 mt-1" fxLayout="row nowrap" fxLayoutGap="1rem">

                <div fxLayout="column">
                    <h3 class="mb-1">Artists</h3>
                    <div *ngFor="let item of longTermArtists | slice: 0:sliceLimit;; let i = index">
                        <a [href]="this.sanitizer.bypassSecurityTrustResourceUrl(item.uri)">
                            <p class="list__item">
                                <img *ngIf="item.images.length > 1" [src]="item.images[1].url"/>
                                {{ item.name }}
                            </p>
                        </a>
                    </div>
                </div>

                <div fxLayout="column">
                    <h3 class="mb-1">Tracks</h3>
                    <div *ngFor="let item of longTermTracks | slice: 0:sliceLimit;; let i = index">
                        <a [href]="this.sanitizer.bypassSecurityTrustResourceUrl(item.uri)">
                            <p class="list__item">
                                <img *ngIf="item.album.images.length > 1" [src]="item.album.images[0].url"/>
                                {{ item.name }}
                            </p>
                        </a>
                    </div>
                </div>

            </div>


        </mat-tab>

        <mat-tab class="mb-1" label="Current">
            <div class="mb-1 mt-1" fxLayout="row nowrap" fxLayoutGap="2rem">

                <div fxLayout="column">
                    <h3 class="mb-1">Artists</h3>
                    <div *ngFor="let item of currentArtists | slice: 0:sliceLimit; let i = index">
                        <a [href]="this.sanitizer.bypassSecurityTrustResourceUrl(item.uri)">
                            <p class="summary__artist__list__item">
                                <img *ngIf="item.images.length > 1" [src]="item.images[1].url" />
                                {{ item.name }}
                            </p>
                        </a>
                    </div>
                </div>

                <div fxLayout="column">
                    <h3 class="mb-1">Tracks</h3>
                    <div *ngFor="let item of currentTracks | slice: 0:sliceLimit; let i = index">
                        <a [href]="this.sanitizer.bypassSecurityTrustResourceUrl(item.uri)">
                            <p class="summary__artist__list__item">
                                <img *ngIf="item.album.images.length > 1" [src]="item.album.images[0].url"/>
                                {{ item.name }}
                            </p>
                        </a>
                    </div>
                </div>

            </div>


        </mat-tab>

    </mat-tab-group>
    </div>
  </main>
</div>
<app-footer [login]="true"></app-footer>


<app-loader *ngIf="!loaded"></app-loader>
